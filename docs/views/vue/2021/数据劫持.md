---
title: definedPrototype
date: 2021-04-13
categories:
 - JavaScript
author: 青菜白玉汤
tags:
 - vue
 - 数据响应式
---

## Object.definePrototype
用于定义一个对象的属性或者修改现有属性，并返回该对象

```javascript
const obj = {}

const handler = {
  value: '该属性对应的值',
  writable: true,           // 设置属性是否可写，默认false
  enumerable: true,         // 该属性是否可枚举，默认false
  configurable: true,       // 该属性是否可配置，默认false

  get: function reactiveGetter() {

  },
  set: function reactiveSetter(newVal) {

  }
}
Object.definedPrototype(obj, 'objName', handler)

```
#### writable
`default：false`

该属性决定了definedPrototype的属性是否可写，需要注意的是，数据描述符不能与存取描述符共存

#### enumerable
`default：false`

该数据描述符决定属性是否可以被forIn、Object.keys枚举到，该数据描述符与存取描述符共享

#### configurable
`default：false`

该数据描述符起作用是表示该属性是否可以被删除、属性配置是否可以二次修改，数据描述符与存取描述符共享


## 例子：响应式计算器
```html
<input id="in1" type="number">
<input id="in2" type="number">
<div id="result"></div>
```
```javascript
const result =document.getElementById('result');
document.getElementById('in1').addEventListener('input', function() {
  obj.in1Value = this.value;
})
document.getElementById("in2").addEventListener('input', function() {
  obj.in2Value = this.value;
})
var obj = {};
var in1Value = 0, in2Value = 0;

// 定义单个使用definePrototype
Object.defineProperties(obj, {
  in1Value: {
    enumerable: false,
    configurable: true,
    get: function reactiveGetter() {
      return in1Value;
    },
    set: function reactiveSetter(newV) {
      in1Value = newV
      calcResult();
    }
  },
  in2Value: {
    enumerable: false,
    configurable: true,
    get: function reactiveGetter() {
      return in2Value;
    },
    set: function reactiveSetter(newV) {
      in2Value = newV
      calcResult();
    }
  }
})
function calcResult() {
  result.innerText = in1Value + in2Value;
}
```
