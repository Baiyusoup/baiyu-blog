---
title: Vue使用技巧
date: 2020-02-01
categories:
 - Vue
author: 青菜白玉汤
---
## 组件通信

1. props和$on/$emit
2. attrs和listeners，可以进行跨级的组件通信
   1. v-bind="$attrs"
   2. v-on="$listeners" 包含了父作用域中不含.native修饰的事件
3. provide/inject 允许一个祖先组件向其所有子孙组件注入一个依赖（属性、方法...），如果provide传入的是基础类型，是非相应的，而传入的是引用类型则会
4. EventBus
5. Vuex
6. 使用Vue.observable，可以让一个对象可以响应
7. \$refs、$children、$parent、$root

# 修饰符

`表单类`

1. v-model.lazy 进行延迟响应，加上修饰符后，需要在输入框失去焦点时才触发响应
2. .trim
3. .number

`事件类`

1. .stop 阻止事件冒泡
2. .prevent 阻止默认事件
3. .capture 将事件流倒置过来
4. .self 只会触发自身的事件
5. .once 只会触发一次
6. .passive 用在onScroll上，让事件的触发不再那么频繁，解决性能问题，毕竟一直触发也不是很好
7. .native 监听原生事件

`鼠标按钮修饰`

1. left
2. right
3. middle

`键盘事件`

`.sync`

用于子组件更新父组件的数据

```javascript
<child :title="xx">

 // child
this.$emit('update:title', 'aaa')
```

## 编写可复用模块

1. 混入mixins
2. 自定义指令：对普通的DOM元素进行底层操作
3. 渲染函数
4. 过滤器

## 编写优雅代码

1. 自动化导入模块

2. 模块化注册插件

3. 导出请求接口

   ```javascript
   // 自我感觉不怎么好，method都是get ？
   const apiList = [
        '/userGateway/user/getPublicKey',  // 登入页面获取公钥
       '/userGateway/userSentry/login',  // 用户登录
       '/userGateway/userSentry/loginByCode',  // 验证码登录
       '/userInfo' // 用户信息
   ]
   let apiName, API = {}
   apiList.forEach(path => {
       apiName = /(?<=\/)[^/]+$/.exec(path)[0]
       API[apiName] = (data, method = 'GET') => {
           return request({
               method,
               url: path,
               data
           })
       }
   })
   
   API.userInfo({}, 'POST').then(res => {
       
   }).catch(err => {
       
   })
   
   ```

   

## $Event传参

1. 子组件emit事件时，$event 接收子组件传上来的参数（数量不多时）
2. 传递原生DOM事件
3. ，，，



## 路由参数解耦

```javascript
const router = [{
    path: '/home/:type/:id',
    name: 'Home',
    component: Home,
    props: (route) => ({
        type: route.params.type,
        id: route.params.id,
        sex: route.query.sex,
    })
}]

// 组件
props: ['type', 'id', 'sex']
// 这样组件就不需要使用this.$route.params.xxx
```