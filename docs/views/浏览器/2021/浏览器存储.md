---
title: 浏览器篇-存储
date: 2021-04-15
categories:
 - 浏览器
author: 青菜白玉汤
---

## 概述
在HTML5之前，客户端存储都是由cookie完成的，但是cookie最多只能存储4k的数据，无法存储大量的数据，因此HTML5就提供两种存储机制`localStorage`和`sessionStorage`。

## Cookie
cookie用来保存web应用的用户信息和他们登录的会话信息，用于服务端于客户端的通信，用来解决HTTP的无状态特性，cookie由名称和值、域domain、路径path、有效期expires、安全属性secure构成，其中cookie的名称和值必须经过encodeURLComponent进行编码。浏览器在发送请求时，会将cookie自动添加到请求头的Set-Cookie字段，前提是请求的域和路径是cookie的domain和path属性指定范围内。

## sessionStorage
该存储机制是由HTML5提出的，用于保存页面标签运行期间的会话信息，实现了Web Storage接口，它的特点是保存的数据只存在于页面标签存在期间，当页面标签的时候所保存的数据就会自动被删除，存储大小在5M左右，不同的浏览器有不同的大小。

该存储机制的限制是只能由创建它的页面标签使用，每个页面标签都有自己的sessionStorage。

## localStorage
该存储机制也是由HTML5提出的，实现了Web Storage接口。用于保存web应用的数据，该存储机制是永久性存储，即把浏览器关闭了，数据也不会消失，数据是保存在磁盘上的，只能手动清除。存储大小也是5M左右，不同的浏览器有不同的大小差异。

该存储机制的限制是数据只能由同一个域的页面使用

## 三者区别
请求方面
1. cookie在发送请求的时候，会自动被浏览器填充到请求头中，而sessionStorage和localStorage不会

生命周期方面
1. cookie的生命周期是由expires字段控制的，sessionStorage的生命周期是页面标签存在的期间，localStorage永久保存在磁盘上，除非手动删除。

存储大小方面
1. cookie最多只能存储4k，sessionStorage和localStorage最多是5M



## 题外
indexedDB用于客户端存储大量的结构化数据，类似NoSql类型的数据库，它的CRUD操作是通过异步请求完成的


