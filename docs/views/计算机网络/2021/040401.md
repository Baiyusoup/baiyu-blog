---
title: 计算机网络基础知识
date: 2021-04-03
categories:
 - 计算机网络
author: 青菜白玉汤
---

## 体系结构
OSI的体系结构共有7层，TCP/IP体系结构有4层还有一种是五层体系结构。
- OSI:      应用层 - 表示层 - 会话层 - 运输层 - 网络层 - 数据链路层 - 物理层
- TCP/IP:   应用层 -                  运输层 - 网络层 -             网络接口层
- 五层：     应用层 -                  运输层 - 网络层 - 数据链路层 - 物理层

发送数据的过程：数据 -> 添加应用层首部 -> 添加运输层首部 -> 添加网络层首部 -> 添加链路层首部 -> 物理层发送比特流

## 协议
### TCP
TCP是一个面向连接、提供可靠服务、无状态的协议
`可靠服务`：无差错、不丢失、不重复且按序到达
### UDP
UDP是一个无连接的
尽最大努力、不保证可靠交付

### TCP和UDP区别
1. TCP是面向连接的，而UDP是面向无连接的
2. TCP提供可靠的服务，而UDP是不可靠的
3. TCP传输的是少量数据，而UDP是大量数据
4. TCP传输速度比UDP慢

### 三次握手
`SYN`同步序列编号，`ACK`确认字符

1. 第一次握手：客户端将标志位SYN置1，随机产生一个值seq=J，并将该数据包发给服务端，此时客户端进入SYN_SENT状态，等待服务端的确认
2. 第二次握手，服务端收到数据包后由标志位SYN=1知道客户端请求建立连接，服务端将SYN和ACK都置1，ack=J+1，随机产生一个值seq=K，并将该数据包发送给客户端已确认连接请求，服务端i请入SYN_RCVD状态
3. 第三次握手：客户端收到确认后，检查ack是否等于J+1、ACK是否等于1，如果无误，将标志位ACK置1，ack=K+1，并将该数据包发送给服务端，服务端检查ack是否为K+1，ACK是否为1，如果无误，就连接建立成功了，客户端和服务端进入ESTABLISHED状态，就可进行传输数据了

### 四次挥手
1. 第一次：客户端发送FIN=M，客户端进入FIN_WAIT状态
2. 第二次：服务端收到FIN后，发送ack=M+1给客户端，进入CLOSE_WAIT状态
3. 第三次：服务端发送FIN=N，用来关闭服务端到客户端的数据传送，进入LAST_ACK状态
4. 第四次：客户端收到FIN后，发送一个ACK给服务端，确认收到的ack无误，服务端进入CLOSED状态


## HTTP报文结构
http报文有两种：请求报文（客户端 -> 服务端）和响应报文（服务端 -> 客户端）

http报文由三部分组成：
1. 开始行：
   1. 请求报文：请求方法 URI 协议版本
   2. 响应报文：协议版本 状态码 原因短语
2. 首部行：
   1. 移步
3. 空行
3. 实体

## 状态码
1xx表示协议的中间状态；2xx表示请求成功；3xx表示重定向，浏览器需要重新请求；4xx表示请求报文错误；5xx表示服务端错误

常见的状态码
1. 101 切换请求协议，将http切换到webSocket
2. 200 
3. 301 永久重定向，会进行缓存
4. 302 临时重定向，表示资源暂时不能访问，不会缓存
5. 304 协商缓存命中
6. 400 请求错误
7. 403 服务器禁止访问
8. 404 资源未找到
9. 500 服务端错误
10. 503 服务端繁忙

## http方法
GET、POST、PUT、DELETE、HEAD、OPTIONS、CONNET、TRACE

### GET和POST的区别
GET用于获取服务器的资源，浏览器发出GET请求后，可以对GET请求的数据做缓存；携带的数据是放在url上的

POST请求用于向服务器提交数据，在浏览器里是由表单发起的，浏览器不会对POST的请求进行缓存；每次POST请求提交的数据都会被浏览器编码到HTTP请求的body里面，只要有两种格式`application/x-www-form-urlencoded`和`multipart/form-data`

## 首部字段
### 通用首部字段
1. Cache-Control 控制缓存
2. Connection 逐跳首部、连接的管理
3. Date 创建报文的日期时间
4. Pragma 报文指令
5. Trailer 报文末端的首部一览
6. Upgrade 升级为其他协议
7. Via 代理服务器的相关信息
8. Warning 错误通知


### 请求首部字段
共19个字段
1. Accept 用户代理可处理的媒体类型
2. Accept-Charset 优先的字符集
3. Accept-Encoding 优先的内容编码
4. Accept-Language 优先的语言
5. Authorization 认证信息
6. User-Agent HTTP客户端程序的信息
7. Expect 期待服务器的特定行为
8. Referer 对请求中URI的原始获取方
9. Host 请求资源所在的服务器

### 响应首部字段
1. Accept-Ranges 是否接受字节范围请求
2. Age 资源创建经过时间
3. Server HTTP服务器的安装信息
4. Location 令客户端重定向客户端的认证信息
5. Retry-After 对再次发起请求的时机要求
6. Proxy-Authenticate 代理服务器对客户端的认证信息
7. ETag 资源的匹配信息
8. Vary 代理服务器缓存的管理信息
9. WWW-Authenticate 服务器对客户端的认证信息

### 实体首部字段
1. Allow 资源可支持的HTTP方法
2. Content-Encoding 实体主体适用的编码方式
3. Content-Language 实体主体的自然语言
4. Content-Length 实体主体的大小（单位字节）
5. Content-Location 代替对应资源的URI
6. Content-MD5 实体主体的报文摘要
7. Content-Range 实体主体的位置范围
8. Content-Type 实体主体的媒体类型
9. Expires 实体主体过期的日期时间
10. Last-Modified 资源的最后修改时间



