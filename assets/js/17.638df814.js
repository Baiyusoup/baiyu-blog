(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{523:function(t,s,a){"use strict";a.r(s);var n=a(22),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"事件流"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件流"}},[t._v("#")]),t._v(" 事件流")]),t._v(" "),a("p",[a("code",[t._v("事件冒泡")]),t._v("：事件是从目标元素开始，向上传递，现代浏览器会一直冒泡到window对象")]),t._v(" "),a("p",[a("code",[t._v("事件捕获")]),t._v("：是从document开始，一直向子级传递，直到到达目标元素。所有浏览器都是从window对象开始捕获事件，而DOM2事件规范规定是从document开始。")]),t._v(" "),a("p",[t._v("DOM2事件规范事件流分成：事件捕获、到达目标、事件冒泡三个阶段")]),t._v(" "),a("p",[t._v("虽然DOM2事件规范明确捕获阶段不命中事件目标，但现代浏览器都会在捕获阶段在事件目标上触发事件，即在目标元素上事件冒泡会比捕获先执行。")]),t._v(" "),a("h1",{attrs:{id:"事件处理程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件处理程序"}},[t._v("#")]),t._v(" 事件处理程序")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 事件处理程序共有三类：DOM0、DOM2、IE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOM0")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onClick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// btn.onClick = null 卸载事件处理程序")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DOM2   三个参数：事件名，事件处理程序handler，useCapture/options")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// useCapture 是否在事件捕获阶段触发")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\noptions: { \n\tcapture: 是否在事件捕获阶段触发,\n\tonce: 是否只触发一次，true会在事件第一次触发后移除事件处理程序\n}\n*/")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// IE，由于IE8之间只支持事件冒泡，因此IE事件只会在冒泡阶段触发")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attachEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'onClick'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("detachEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'onClick'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br")])]),a("p",[t._v("使用DOM0绑定的事件处理程序只能存在一个，不能绑定多个事件处理程序；")]),t._v(" "),a("p",[t._v("DOM2和IE可以绑定多个事件处理程序，但是DOM2对于多个事件处理程序的触发顺序是从上到下，即按添加的顺序触发，而IE却是反着来，最先添加的反而最后触发。")]),t._v(" "),a("p",[t._v("在事件处理程序中，一个有趣的事情就是事件处理函数的作用域被扩展了，在DOM事件处理程序中，事件处理函数的执行上下文对象是元素本身，这个功能是通过"),a("strong",[t._v("with")]),t._v("实现的，但是在IE中，事件处理函数的执行上下文对象是window。")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 元素本身")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 需要注意事件处理函数不能是箭头函数")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onClick "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实现原理")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("h2",{attrs:{id:"事件对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件对象"}},[t._v("#")]),t._v(" 事件对象")]),t._v(" "),a("p",[t._v("在DOM中发生事件时，所有相关信息都会被收集到一个event对象中。如果事件处理程序绑定在目标元素上，那么this === currentarget === target，但是如果是绑定在父元素上，即使用了事件委托，那么this === currentTarget，而target === 目标元素。")]),t._v(" "),a("p",[t._v("在IE中，event对象可以通过windown.event访问。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("DOM event")]),t._v(" "),a("th",[t._v("IE event")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("stopPropagation() 取消冒泡")]),t._v(" "),a("td",[t._v("cancelBubble <可读写>  默认为false，设置true可以取消冒泡")])]),t._v(" "),a("tr",[a("td",[t._v("preventDefault()")]),t._v(" "),a("td",[t._v("returnValue <读/写> 默认为true，设置false可以取消默认事件")])]),t._v(" "),a("tr",[a("td",[t._v("target")]),t._v(" "),a("td",[t._v("srcElement <读> 事件目标元素")])]),t._v(" "),a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",[t._v("type")])]),t._v(" "),a("tr",[a("td",[t._v("bubbles 表示事件是否冒泡")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("cancelable 表示是否可以取消事件的默认行为")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("currentTarget")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("defaultPrevented 表示是否已经调用preventDefault() dom3新增的")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("detail 整数，事件相关的其他信息")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("stopImmediatePropagation() 取消所有后续事件捕获或冒泡，并阻止任何后续事件处理程序（dom3）")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("stopPropagation() 用户取消所有后续事件或事件冒泡，只有在bubbles为true下，有效")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td")])])]),t._v(" "),a("h2",{attrs:{id:"事件类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件类型"}},[t._v("#")]),t._v(" 事件类型")]),t._v(" "),a("h3",{attrs:{id:"用户界面事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户界面事件"}},[t._v("#")]),t._v(" 用户界面事件")]),t._v(" "),a("h3",{attrs:{id:"焦点事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#焦点事件"}},[t._v("#")]),t._v(" 焦点事件")]),t._v(" "),a("h3",{attrs:{id:"鼠标事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#鼠标事件"}},[t._v("#")]),t._v(" 鼠标事件")]),t._v(" "),a("h3",{attrs:{id:"输入事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输入事件"}},[t._v("#")]),t._v(" 输入事件")]),t._v(" "),a("h3",{attrs:{id:"键盘事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#键盘事件"}},[t._v("#")]),t._v(" 键盘事件")]),t._v(" "),a("h3",{attrs:{id:"合成事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#合成事件"}},[t._v("#")]),t._v(" 合成事件")])])}),[],!1,null,null,null);s.default=e.exports}}]);